<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CockpitMainServer - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-CockpitMainServer.html">CockpitMainServer</a><ul class='methods'><li data-type='method'><a href="module-CockpitMainServer.html#.reload_serviceConfig">reload_serviceConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~get_runningServices">get_runningServices</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~load_serviceConfig">load_serviceConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~load_websiteConfig">load_websiteConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~read_serviceConfig">read_serviceConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~read_websiteConfig">read_websiteConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~reload_websiteConfig">reload_websiteConfig</a></li><li data-type='method'><a href="module-CockpitMainServer.html#~update_websiteGitPull">update_websiteGitPull</a></li></ul></li><li><a href="module-SystemResourceMonitor.html">SystemResourceMonitor</a><ul class='methods'><li data-type='method'><a href="module-SystemResourceMonitor.html#.get_freeDiskSpace">get_freeDiskSpace</a></li><li data-type='method'><a href="module-SystemResourceMonitor.html#.get_freeMemory">get_freeMemory</a></li><li data-type='method'><a href="module-SystemResourceMonitor.html#.get_freeSwap">get_freeSwap</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#GET'/'">GET '/'</a></li><li><a href="global.html#GET'/services'">GET '/services'</a></li><li><a href="global.html#GET/logs">GET /logs</a></li><li><a href="global.html#GET/websites">GET /websites</a></li><li><a href="global.html#POST'/services'">POST '/services'</a></li><li><a href="global.html#POST/websites">POST /websites</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">CockpitMainServer</h1>
    
    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Cockpit Server: a nodeJS:express server designed to monitor server resources and deploy code.</div>
        

        
            















<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>Nov 15, 2019</li></ul></dd>
    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Justin Carroll (jrc.csus@gmail.com)</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:Express</li>
        </ul>
    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id=".reload_serviceConfig"><span class="type-signature">(async, static) </span>reload_serviceConfig<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Re-read the service config object on the server.  This is necessary for when you need to update
the service configuration to exclude or include new services that should be monitored.  This is a 
helper function/wrapper to loading the config.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line53">line 53</a>
    </li></ul></dd>
    

    

    

    
</dl>
















            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~get_runningServices"><span class="type-signature">(async, inner) </span>get_runningServices<span class="signature">()</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Get the running services on the machine, grep'ed against the service.conf file for allowed
serices.  Ultimately using systemctl under the hood.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line96">line 96</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>There is a current cybersecurity flaw here that will allow "*" to return all services. Need to do data santization.</li>
        </ul>
    </dd>
    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    allServices
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~load_serviceConfig"><span class="type-signature">(async, inner) </span>load_serviceConfig<span class="signature">()</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Load the service config from the file system.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line64">line 64</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    The service config object.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~load_websiteConfig"><span class="type-signature">(async, inner) </span>load_websiteConfig<span class="signature">()</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    This will reload the entire website.conf file from the filesystem. This both returns the config values as well as
invokes read_websiteConfig() to parse and store (in memory) the website configuration.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line230">line 230</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    data website.conf (JSON) parsed data object.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~read_serviceConfig"><span class="type-signature">(inner) </span>read_serviceConfig<span class="signature">(err, data)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Runs JSON.parse() on the raw fs.read() of the service config value.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>err</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line82">line 82</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>need to have error handling here.</li>
        </ul>
    </dd>
    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    The parsed service config object.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~read_websiteConfig"><span class="type-signature">(inner) </span>read_websiteConfig<span class="signature">(err, data)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Reads/parses the website.conf file.  JSON data is underlying.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>err</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line245">line 245</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    websiteConfig (parsed JSON)
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    



            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~reload_websiteConfig"><span class="type-signature">(async, inner) </span>reload_websiteConfig<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Invoking this function will reload the website.conf file from the server.  This is useful when you 
deploy a new website. This is a promisified wrapper for the real function.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line221">line 221</a>
    </li></ul></dd>
    

    

    

    
</dl>
















            </div>
        
            <div class="subsection-item">
                

    

    <h4 class="name" id="~update_websiteGitPull"><span class="type-signature">(async, inner) </span>update_websiteGitPull<span class="signature">(websiteName)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Update website on server with a git pull request.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>websiteName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The human readible website name as configured in the website.conf file.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line204">line 204</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5 class="returns">Returns:</h5>

        
<div class="param-desc">
    stdout from the git pull command.
</div>



    



            </div>
        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Nov 19 2019 16:51:27 GMT-0700 (Mountain Standard Time) using the Toast theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>